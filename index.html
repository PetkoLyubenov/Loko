<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#DC143C">
    <title>–§–ö –õ–æ–∫–æ–º–æ—Ç–∏–≤ –°–æ—Ñ–∏—è</title>
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="icon-192.png">
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@500;700&family=Source+Sans+3:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --red: #DC143C; --black: #080808; --gray: #1a1a1a; }
        body { font-family: 'Source Sans 3', sans-serif; background: var(--black); color: white; margin: 0; padding-bottom: 70px; }
        .header { background: var(--red); padding: 20px; text-align: center; box-shadow: 0 4px 10px rgba(0,0,0,0.5); }
        .header h1 { font-family: 'Oswald', sans-serif; margin: 0; text-transform: uppercase; }
        
        .nav-bar { position: fixed; bottom: 0; width: 100%; background: var(--gray); display: flex; justify-content: space-around; padding: 10px 0; border-top: 2px solid var(--red); z-index: 100; }
        .nav-item { color: white; text-decoration: none; font-size: 14px; text-align: center; opacity: 0.7; }
        .nav-item.active { opacity: 1; color: var(--red); }

        .content-section { padding: 20px; display: none; }
        .content-section.active { display: block; }

        table { width: 100%; border-collapse: collapse; background: var(--gray); border-radius: 8px; overflow: hidden; }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid #333; }
        th { background: #222; color: var(--red); }
        .loko-row { background: rgba(220, 20, 60, 0.2) !important; font-weight: bold; }
        
        .squad-section { margin-top: 20px; }
        .cat-title { background: var(--red); padding: 8px 15px; font-weight: bold; margin: 15px 0; border-radius: 4px; }
        .staff-item { padding: 10px; border-bottom: 1px solid #333; display: flex; justify-content: space-between; }
    </style>
</head>
<body>

    <div class="header">
        <h1>–õ–æ–∫–æ–º–æ—Ç–∏–≤ –°–æ—Ñ–∏—è</h1>
    </div>

    <div id="home" class="content-section active">
        <div class="cat-title">‚öΩ –°–ª–µ–¥–≤–∞—â –º–∞—á</div>
        <div id="next-match" style="text-align:center; padding: 20px; background: var(--gray); border-radius: 8px;">
            –ó–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è...
        </div>
    </div>

    <div id="standings" class="content-section">
        <div class="cat-title">üìä –ö–ª–∞—Å–∏—Ä–∞–Ω–µ - –ü—ä—Ä–≤–∞ –õ–∏–≥–∞</div>
        <table>
            <thead>
                <tr>
                    <th>#</th>
                    <th>–û—Ç–±–æ—Ä</th>
                    <th>–ú</th>
                    <th>–¢</th>
                </tr>
            </thead>
            <tbody id="standings-table">
                </tbody>
        </table>
    </div>

    <div id="staff" class="content-section">
        <div class="squad-section">
            <div class="cat-title">üëî –¢—Ä–µ–Ω—å–æ—Ä—Å–∫–∏ —â–∞–±</div>
            <div class="staff-item"><span>–ê–Ω—Ç–æ–Ω –í–µ–ª–∫–æ–≤</span> <b>–°—Ç–∞—Ä—à–∏ —Ç—Ä–µ–Ω—å–æ—Ä</b></div>
            <div class="staff-item"><span>–Æ—Ä–∏ –í–∞—Å–µ–≤</span> <b>–ü–æ–º–æ—â–Ω–∏–∫ —Ç—Ä–µ–Ω—å–æ—Ä</b></div>
            <div class="staff-item"><span>–°—Ç–æ–π—á–æ –î—Ä–∞–≥–æ–≤</span> <b>–¢—Ä–µ–Ω—å–æ—Ä –≤—Ä–∞—Ç–∞—Ä–∏</b></div>
        </div>
    </div>

    <nav class="nav-bar">
        <a href="#" class="nav-item active" onclick="switchTab('home')">üè† –ù–∞—á–∞–ª–æ</a>
        <a href="#" class="nav-item" onclick="switchTab('standings')">üìä –¢–∞–±–ª–∏—Ü–∞</a>
        <a href="#" class="nav-item" onclick="switchTab('staff')">üëî –©–∞–±</a>
    </nav>

    <script>
        function switchTab(tabId) {
            document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            event.currentTarget.classList.add('active');
        }

        async function fetchData() {
            const PROXY = "https://api.allorigins.win/raw?url=";
            const API_STANDINGS = encodeURIComponent("https://api.fclokomotivsofia.bg/api/standings?v=" + Date.now());

            try {
                const response = await fetch(PROXY + API_STANDINGS);
                const data = await response.json();
                
                let rows = "";
                data.forEach((team, index) => {
                    const isLoko = team.name.includes("–õ–æ–∫–æ–º–æ—Ç–∏–≤ –°–æ—Ñ–∏—è") || team.name.includes("–õ–æ–∫–æ –°–æ—Ñ–∏—è");
                    rows += `<tr class="${isLoko ? 'loko-row' : ''}">
                        <td>${index + 1}</td>
                        <td>${team.name}</td>
                        <td>${team.played}</td>
                        <td>${team.points}</td>
                    </tr>`;
                });
                document.getElementById('standings-table').innerHTML = rows;
            } catch (e) {
                console.error("–ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –∑–∞—Ä–µ–∂–¥–∞–Ω–µ:", e);
            }
        }

        // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞ Service Worker
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/service-worker.js');
        }

        window.onload = fetchData;
    </script>
</body>
</html>